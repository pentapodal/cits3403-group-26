{% extends "base.html" %}

{% block content %}

  <div class="friend-container">
    <h1>Friends</h1> 
    <button id="add-friend-btn" class="nav-btn">Add Friend</button>

    <!---add friend ,odal window -->
    <div id="add-friend-modal" class="modal">
        <div class="modal-content">
          <span class="close-btn">&times;</span>

          <!--Friend request form, edit to add route flask thing-->
          <form onsubmit="alert('Friend request functionality not implemented yet'); return false;">
            <input type="text" name="friend-username" placeholder="Enter friend's username" required>
            <button type="submit" class="nav-btn">Send Friend Request</button>
          </form>
          
        </div>

        <script>
        const modal = document.getElementById("add-friend-modal");
        const btn = document.getElementById("add-friend-btn");
        const closeBtn = document.querySelector(".close-btn");

        btn.onclick = () => modal.style.display = "block";
        closeBtn.onclick = () => modal.style.display = "none";

        window.onclick = (event) => {
          if (event.target == modal) modal.style.display = "none";
        };
        </script>

    </div>

    <div class="friend-list">

      <div class="friend-grid">

        {% for friend in friends %}

        <div class="friend-card">

          
          {% if friend.profile_picture %}
            <img src="{{ url_for('static', filename='images/profile_pictures/' + friend.profile_picture) }}" alt="pfp" height="100" width="100">
          {% else %}
            <img src="{{ url_for('static', filename='images/profile_pictures/default.png') }}" alt="Default pfp" height="100" width="100">
          {% endif %}
          <span class="friend-username">{{friend.username}}</span>

        </div>

        {% else %}
        <p>You have no friends yet.</p>

        {% endfor %}

      </div>

    </div>
  </div>
{% endblock content %}
