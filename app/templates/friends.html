{% extends "base.html" %}

{% block content %}

  <div class="friends-container">

    <p>Friends</p>
    <button class="add-friend-btn" onclick="document.getElementById('add-friend-modal').style.display='block'">Add Friend</button>

    <div id="add-friend-modal" class="modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2>Add friends</h2>
        <form onsubmit="alert('Friend request functionality not implemented yet'); return false;">
          <input type="text" name="friend-username" placeholder="Enter friend's username" required>
          <button type="submit" class="nav-btn">Send friend request</button>
        </form>
      </div>

      <script>
      const modal = document.getElementById("add-friend-modal");
      const btn = document.getElementById("add-friend-btn");
      const closeBtn = document.querySelector(".close-btn");

      btn.onclick = () => modal.style.display = "block";
      closeBtn.onclick = () => modal.style.display = "none";

      window.onclick = (event) => {
        if (event.target == modal) modal.style.display = "none";
      };
      </script>

    </div>

    <div class="friends-grid">

      {% for friend in friends %}

      <div class="friend-card">

        
        {% if friend.profile_picture %}
          <img src="{{ url_for('static', filename='images/profile_pictures/' + friend.profile_picture) }}" alt="pfp" width="50" height="50">
        {% else %}
          <img src="{{ url_for('static', filename='images/profile_pictures/default.png') }}" alt="Default pfp" width="50" height="50">
        {% endif %}
        <span class="friend-username">{{friend.username}}</span>

      </div>

      {% else %}
      <p>You have no friends yet.</p>

      {% endfor %}

    </div>

  </div>
{% endblock content %}
